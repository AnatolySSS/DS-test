server {
  listen 80;
  server_name localhost

  root /usr/share/nginx/html;
  index index.html;

  # üîπ –û—Ç–¥–∞—ë–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã React SPA (JS, CSS –∏ –ø—Ä.)
  location /static/ {
      try_files $uri $uri/ =404;
  }

  # üîπ React SPA fallback (–≤—Å—ë, —á—Ç–æ –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å /api –∏ –Ω–µ —Ñ–∞–π–ª ‚Äî —ç—Ç–æ SPA)
  location / {
    try_files $uri /index.html;
  }

  # –ü—Ä–æ–∫—Å–∏—Ä—É–µ–º API-–∑–∞–ø—Ä–æ—Å—ã –Ω–∞ Express
  location /api/ {
    proxy_pass http://backend:3010/api/;  # –ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç Express
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
  }

  error_page 404 /index.html;
}
